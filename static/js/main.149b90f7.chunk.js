(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{19:function(e,t,c){},21:function(e,t,c){"use strict";c.r(t);var s=c(12),a=c.n(s),n=c(4),r=(c(18),c(19),c(2)),l=c(10),i=c(9),j=c(3),o=c(6),b=c.n(o),d=c(1),h=c(13);function u(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(j.a)(e,2),s=t[0],a=t[1];null===a?c.delete(s):Array.isArray(a)?(c.delete(s),a.forEach((function(e){return c.append(s,e)}))):c.set(s,a)})),c.toString()}var O=c(0),m=["children","params"],x=function(e){var t=e.children,c=e.params,s=Object(h.a)(e,m),a=Object(n.d)(),r=Object(j.a)(a,1)[0];return Object(O.jsx)(n.b,Object(i.a)(Object(i.a)({to:{search:u(r,c)}},s),{},{children:t}))},p=["16","17","18","19","20"],f=function(){var e=Object(n.d)(),t=Object(j.a)(e,1)[0].getAll("centuries");return Object(O.jsxs)("div",{className:"level is-flex-grow-1 is-mobile",children:[Object(O.jsx)("div",{className:"level-left",children:p.map((function(e){return Object(O.jsx)(x,{className:b()("button","mr-1",{"is-info":t.includes(e)}),params:{centuries:t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Object(l.a)(t),[e])},children:e},e)}))}),Object(O.jsx)("div",{className:"level-right ml-4",children:Object(O.jsx)(x,{params:{centuries:null},className:b()("button","is-success",{"is-outlined":t.length>0}),children:"All"})})]})},N=function(e){var t=e.person,c=Object(r.f)().search;return Object(O.jsx)(n.b,{style:{color:"m"===t.sex?"rgb(0, 71, 171)":"rgb(255, 0, 0)"},to:{pathname:"/people/".concat(t.slug),search:c},children:t.name})},v=function(e){var t=e.person;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("th",{children:Object(O.jsx)(N,{person:t})}),Object(O.jsx)("th",{children:t.sex}),Object(O.jsx)("th",{children:t.born}),Object(O.jsx)("th",{children:t.died}),Object(O.jsx)("th",{children:t.mother?Object(O.jsx)(N,{person:t.mother}):Object(O.jsx)("p",{style:{fontWeight:"bold"},children:t.motherName})}),Object(O.jsx)("th",{children:t.father?Object(O.jsx)(N,{person:t.father}):Object(O.jsx)("p",{style:{fontWeight:"bold"},children:t.fatherName})})]})},g=function(e){var t=e.field,c=Object(n.d)(),s=Object(j.a)(c,1)[0],a=s.get("sort")||"",r="desc"===s.get("order"),l={sort:t===a&&r?null:t,order:t!==a||r?null:"desc"};return Object(O.jsx)(x,{params:l,children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:b()("fas",{"fa-sort":a!==t,"fa-sort-up":a===t&&!r,"fa-sort-down":a===t&&r})})})})},_=function(){var e=Object(r.h)().personSlug,t=Object(d.useState)([]),c=Object(j.a)(t,2),s=c[0],a=c[1],o=Object(n.d)(),h=Object(j.a)(o,2),m=h[0],p=h[1],N=m.get("sex"),_=m.get("query")||"",y=m.getAll("centuries"),P=m.get("sort"),k="desc"===m.get("order");Object(d.useEffect)((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return Object(i.a)({},e)}));t.forEach((function(e){Object.assign(e,{mother:t.find((function(t){return t.name===e.motherName})),father:t.find((function(t){return t.name===e.fatherName}))})})),a(t)}))}),[]);var w=Object(l.a)(s);if(N&&(w=w.filter((function(e){return e.sex===N}))),y.length>0){w=w.filter((function(e){return y.includes(function(e){return Math.ceil(e.born/100)}(e).toString())}))}if(_){var S=_.toLocaleLowerCase();w=w.filter((function(e){return[e.name,e.motherName||"",e.fatherName||""].join("\n").toLocaleLowerCase().includes(S)}))}return P&&w.sort((function(e,t){switch(P){case"name":case"sex":return e[P].localeCompare(t[P]);case"born":case"died":return e[P]-t[P];default:return 0}})),k&&w.reverse(),Object(O.jsxs)("div",{className:"People",children:[Object(O.jsx)("h2",{className:"People",children:"People page"}),Object(O.jsx)("div",{className:"filter",children:Object(O.jsxs)("nav",{className:"panel",children:[Object(O.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(O.jsxs)("p",{className:"panel-tabs",children:[Object(O.jsx)(x,{params:{sex:null},className:b()({"is-active":!N}),children:"All"}),Object(O.jsx)(x,{params:{sex:"m"},className:b()({"is-active":"m"===N}),children:"Male"}),Object(O.jsx)(x,{params:{sex:"f"},className:b()({"is-active":"f"===N}),children:"Female"})]}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("p",{className:"control has-icons-left",children:[Object(O.jsx)("input",{className:"input","data-cy":"filterInput",type:"text",placeholder:"Search",value:_,onChange:function(e){return p(u(m,{query:e.target.value||null}))}}),Object(O.jsx)("span",{className:"icon is-left",children:Object(O.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(O.jsx)("div",{className:"panel-block is-flex-direction-column",children:Object(O.jsx)(f,{})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsx)(x,{className:"button is-link is-outlined is-fullwidth",params:{sex:null,query:null,centuries:null},children:"Reset all filters"})})]})}),Object(O.jsxs)("table",{className:"PeopleTable Collapse",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("th",{className:"thead__bold",children:["Name",Object(O.jsx)(g,{field:"name"})]}),Object(O.jsxs)("th",{className:"thead__bold",children:["Sex",Object(O.jsx)(g,{field:"sex"})]}),Object(O.jsxs)("th",{className:"thead__bold",children:["Born",Object(O.jsx)(g,{field:"born"})]}),Object(O.jsxs)("th",{className:"thead__bold",children:["Died",Object(O.jsx)(g,{field:"died"})]}),Object(O.jsx)("th",{className:"thead__bold",children:"Mother"}),Object(O.jsx)("th",{className:"thead__bold",children:"Father"})]})}),Object(O.jsx)("tbody",{children:w.map((function(t){return Object(O.jsx)("tr",{style:{backgroundColor:t.slug===e?"aquamarine":""},children:Object(O.jsx)(v,{person:t})},t.slug)}))})]})]})},y=function(){return Object(O.jsx)("div",{className:"Home People",children:Object(O.jsx)("h2",{children:"Home page"})})},P=function(){return Object(O.jsx)("div",{className:"NotFoundPage People",children:Object(O.jsx)("h2",{children:"Page not found"})})},k=function(e){return b()("nav-bar-item","Nav__link","Nav",{"has-background-grey-lighter":e.isActive})},w=function(){var e=Object(r.f)();return Object(O.jsx)("header",{className:"Header",children:Object(O.jsxs)("nav",{className:"Nav",children:[Object(O.jsx)(n.c,{to:"/",className:k,children:"Home"}),Object(O.jsx)(n.c,{to:{pathname:"/people",search:e.search},className:k,children:"People"})]})})},S=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(w,{}),Object(O.jsxs)(r.d,{children:[Object(O.jsx)(r.b,{path:"/",element:Object(O.jsx)(y,{})}),Object(O.jsx)(r.b,{path:"/home",element:Object(O.jsx)(r.a,{to:"/"})}),Object(O.jsxs)(r.b,{path:"/people",children:[Object(O.jsx)(r.b,{index:!0,element:Object(O.jsx)(_,{})}),Object(O.jsx)(r.b,{path:":personSlug",element:Object(O.jsx)(_,{})})]}),Object(O.jsx)(r.b,{path:"*",element:Object(O.jsx)(P,{})})]})]})};a.a.render(Object(O.jsx)(n.a,{children:Object(O.jsx)(S,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.149b90f7.chunk.js.map